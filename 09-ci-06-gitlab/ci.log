Running with gitlab-runner 16.7.0 (102c81ba)
  on runner UzSo74AUe, system ID: s_478a3ba8e8f4
Preparing the "shell" executor 00:00
Using Shell (bash) executor...
Preparing environment 00:00
Running on runner...
Getting source from Git repository 00:01
Fetching changes with git depth set to 20...
Initialized empty Git repository in /home/gitlab-runner/builds/UzSo74AUe/0/root/my-pro/.git/
Created fresh repository.
Checking out f7d8bde2 as detached HEAD (ref is main)...
Skipping Git submodules setup
Executing "step_script" stage of the job script 00:58
$ docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY
WARNING! Using --password via the CLI is insecure. Use --password-stdin.
WARNING! Your password will be stored unencrypted in /home/gitlab-runner/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store
Login Succeeded
$ docker build -t $CI_REGISTRY_IMAGE:hello-gitlab-$CI_COMMIT_SHORT_SHA .
#0 building with "default" instance using docker driver
#1 [internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.1s
#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 605B done
#2 DONE 0.1s
#3 [internal] load metadata for docker.io/library/centos:7
#3 DONE 2.3s
#4 [1/5] FROM docker.io/library/centos:7@sha256:be65f488b7764ad3638f236b7b515b3678369a5124c47b8d32916d6487418ea4
#4 resolve docker.io/library/centos:7@sha256:be65f488b7764ad3638f236b7b515b3678369a5124c47b8d32916d6487418ea4
#4 resolve docker.io/library/centos:7@sha256:be65f488b7764ad3638f236b7b515b3678369a5124c47b8d32916d6487418ea4 0.2s done
#4 DONE 0.2s
#5 [internal] load build context
#5 transferring context: 437B done
#5 DONE 0.2s
#4 [1/5] FROM docker.io/library/centos:7@sha256:be65f488b7764ad3638f236b7b515b3678369a5124c47b8d32916d6487418ea4
#4 sha256:be65f488b7764ad3638f236b7b515b3678369a5124c47b8d32916d6487418ea4 1.20kB / 1.20kB done
#4 sha256:dead07b4d8ed7e29e98de0f4504d87e8880d4347859d839686a31da35a3b532f 529B / 529B done
#4 sha256:eeb6ee3f44bd0b5103bb561b4c16bcb82328cfe5809ab675bb17ab3a16c517c9 2.75kB / 2.75kB done
#4 sha256:2d473b07cdd5f0912cd6f1a703352c82b512407db6b05b43f2553732b55df3bc 0B / 76.10MB 0.2s
#4 sha256:2d473b07cdd5f0912cd6f1a703352c82b512407db6b05b43f2553732b55df3bc 10.49MB / 76.10MB 0.5s
#4 sha256:2d473b07cdd5f0912cd6f1a703352c82b512407db6b05b43f2553732b55df3bc 15.73MB / 76.10MB 0.6s
#4 sha256:2d473b07cdd5f0912cd6f1a703352c82b512407db6b05b43f2553732b55df3bc 34.60MB / 76.10MB 0.9s
#4 sha256:2d473b07cdd5f0912cd6f1a703352c82b512407db6b05b43f2553732b55df3bc 41.94MB / 76.10MB 1.0s
#4 sha256:2d473b07cdd5f0912cd6f1a703352c82b512407db6b05b43f2553732b55df3bc 58.72MB / 76.10MB 1.2s
#4 sha256:2d473b07cdd5f0912cd6f1a703352c82b512407db6b05b43f2553732b55df3bc 68.16MB / 76.10MB 1.3s
#4 sha256:2d473b07cdd5f0912cd6f1a703352c82b512407db6b05b43f2553732b55df3bc 76.10MB / 76.10MB 1.4s
#4 sha256:2d473b07cdd5f0912cd6f1a703352c82b512407db6b05b43f2553732b55df3bc 76.10MB / 76.10MB 1.9s done
#4 extracting sha256:2d473b07cdd5f0912cd6f1a703352c82b512407db6b05b43f2553732b55df3bc
#4 extracting sha256:2d473b07cdd5f0912cd6f1a703352c82b512407db6b05b43f2553732b55df3bc 3.4s done
#4 DONE 6.4s
#6 [2/5] RUN yum install -y python3-pip python3 &&     pip3 install --upgrade pip
#6 0.733 Loaded plugins: fastestmirror, ovl
#6 1.583 Determining fastest mirrors
#6 1.955  * base: mirror.yandex.ru
#6 1.956  * extras: mirror.yandex.ru
#6 1.956  * updates: mirrors.datahouse.ru
#6 8.628 Resolving Dependencies
#6 8.629 --> Running transaction check
#6 8.629 ---> Package python3.x86_64 0:3.6.8-21.el7_9 will be installed
#6 8.925 --> Processing Dependency: python3-libs(x86-64) = 3.6.8-21.el7_9 for package: python3-3.6.8-21.el7_9.x86_64
#6 9.704 --> Processing Dependency: python3-setuptools for package: python3-3.6.8-21.el7_9.x86_64
#6 9.706 --> Processing Dependency: libpython3.6m.so.1.0()(64bit) for package: python3-3.6.8-21.el7_9.x86_64
#6 9.706 ---> Package python3-pip.noarch 0:9.0.3-8.el7 will be installed
#6 9.856 --> Running transaction check
#6 9.857 ---> Package python3-libs.x86_64 0:3.6.8-21.el7_9 will be installed
#6 9.925 --> Processing Dependency: libtirpc.so.1()(64bit) for package: python3-libs-3.6.8-21.el7_9.x86_64
#6 9.927 ---> Package python3-setuptools.noarch 0:39.2.0-10.el7 will be installed
#6 9.927 --> Running transaction check
#6 9.927 ---> Package libtirpc.x86_64 0:0.2.4-0.16.el7 will be installed
#6 10.18 --> Finished Dependency Resolution
#6 10.18 
#6 10.18 Dependencies Resolved
#6 10.18 
#6 10.18 ================================================================================
#6 10.18  Package                  Arch         Version              Repository     Size
#6 10.18 ================================================================================
#6 10.18 Installing:
#6 10.18  python3                  x86_64       3.6.8-21.el7_9       updates        71 k
#6 10.18  python3-pip              noarch       9.0.3-8.el7          base          1.6 M
#6 10.18 Installing for dependencies:
#6 10.18  libtirpc                 x86_64       0.2.4-0.16.el7       base           89 k
#6 10.18  python3-libs             x86_64       3.6.8-21.el7_9       updates       7.0 M
#6 10.18  python3-setuptools       noarch       39.2.0-10.el7        base          629 k
#6 10.18 
#6 10.18 Transaction Summary
#6 10.18 ================================================================================
#6 10.18 Install  2 Packages (+3 Dependent packages)
#6 10.18 
#6 10.18 Total download size: 9.3 M
#6 10.18 Installed size: 48 M
#6 10.18 Downloading packages:
#6 10.33 warning: /var/cache/yum/x86_64/7/updates/packages/python3-3.6.8-21.el7_9.x86_64.rpm: Header V4 RSA/SHA256 Signature, key ID f4a80eb5: NOKEY
#6 10.33 Public key for python3-3.6.8-21.el7_9.x86_64.rpm is not installed
#6 10.34 Public key for libtirpc-0.2.4-0.16.el7.x86_64.rpm is not installed
#6 10.47 --------------------------------------------------------------------------------
#6 10.47 Total                                               33 MB/s | 9.3 MB  00:00     
#6 10.47 Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7
#6 10.49 Importing GPG key 0xF4A80EB5:
#6 10.49  Userid     : "CentOS-7 Key (CentOS 7 Official Signing Key) <security@centos.org>"
#6 10.49  Fingerprint: 6341 ab27 53d7 8a78 a7c2 7bb1 24c6 a8a7 f4a8 0eb5
#6 10.49  Package    : centos-release-7-9.2009.0.el7.centos.x86_64 (@CentOS)
#6 10.49  From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7
#6 10.52 Running transaction check
#6 10.53 Running transaction test
#6 10.56 Transaction test succeeded
#6 10.56 Running transaction
#6 10.66   Installing : libtirpc-0.2.4-0.16.el7.x86_64                               1/5 
#6 11.06   Installing : python3-setuptools-39.2.0-10.el7.noarch                      2/5 
#6 11.51   Installing : python3-pip-9.0.3-8.el7.noarch                               3/5 
#6 11.81   Installing : python3-3.6.8-21.el7_9.x86_64                                4/5 
#6 13.10   Installing : python3-libs-3.6.8-21.el7_9.x86_64                           5/5 
#6 13.72   Verifying  : libtirpc-0.2.4-0.16.el7.x86_64                               1/5 
#6 13.77   Verifying  : python3-libs-3.6.8-21.el7_9.x86_64                           2/5 
#6 13.79   Verifying  : python3-3.6.8-21.el7_9.x86_64                                3/5 
#6 13.82   Verifying  : python3-setuptools-39.2.0-10.el7.noarch                      4/5 
#6 13.85   Verifying  : python3-pip-9.0.3-8.el7.noarch                               5/5 
#6 13.92 
#6 13.92 Installed:
#6 13.92   python3.x86_64 0:3.6.8-21.el7_9        python3-pip.noarch 0:9.0.3-8.el7       
#6 13.92 
#6 13.92 Dependency Installed:
#6 13.92   libtirpc.x86_64 0:0.2.4-0.16.el7                                              
#6 13.92   python3-libs.x86_64 0:3.6.8-21.el7_9                                          
#6 13.92   python3-setuptools.noarch 0:39.2.0-10.el7                                     
#6 13.92 
#6 13.92 Complete!
#6 14.35 WARNING: Running pip install with root privileges is generally not a good idea. Try `pip3 install --user` instead.
#6 14.71 Collecting pip
#6 14.91   Downloading https://files.pythonhosted.org/packages/a4/6d/6463d49a933f547439d6b5b98b46af8742cc03ae83543e4d7688c2420f8b/pip-21.3.1-py3-none-any.whl (1.7MB)
#6 15.26 Installing collected packages: pip
#6 16.14 Successfully installed pip-21.3.1
#6 DONE 18.0s
#7 [3/5] RUN pip3 install flask flask-jsonpify flask-restful
#7 1.098 Collecting flask
#7 1.195   Downloading Flask-2.0.3-py3-none-any.whl (95 kB)
#7 1.388 Collecting flask-jsonpify
#7 1.412   Downloading Flask-Jsonpify-1.5.0.tar.gz (3.0 kB)
#7 1.421   Preparing metadata (setup.py): started
#7 1.658   Preparing metadata (setup.py): finished with status 'done'
#7 1.748 Collecting flask-restful
#7 1.773   Downloading Flask_RESTful-0.3.10-py2.py3-none-any.whl (26 kB)
#7 1.912 Collecting click>=7.1.2
#7 1.936   Downloading click-8.0.4-py3-none-any.whl (97 kB)
#7 2.058 Collecting Jinja2>=3.0
#7 2.084   Downloading Jinja2-3.0.3-py3-none-any.whl (133 kB)
#7 2.246 Collecting Werkzeug>=2.0
#7 2.270   Downloading Werkzeug-2.0.3-py3-none-any.whl (289 kB)
#7 2.396 Collecting itsdangerous>=2.0
#7 2.420   Downloading itsdangerous-2.0.1-py3-none-any.whl (18 kB)
#7 2.755 Collecting pytz
#7 2.780   Downloading pytz-2023.3.post1-py2.py3-none-any.whl (502 kB)
#7 2.922 Collecting aniso8601>=0.82
#7 2.947   Downloading aniso8601-9.0.1-py2.py3-none-any.whl (52 kB)
#7 3.046 Collecting six>=1.3.0
#7 3.070   Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)
#7 3.313 Collecting importlib-metadata
#7 3.338   Downloading importlib_metadata-4.8.3-py3-none-any.whl (17 kB)
#7 3.604 Collecting MarkupSafe>=2.0
#7 3.628   Downloading MarkupSafe-2.0.1-cp36-cp36m-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64.whl (30 kB)
#7 3.712 Collecting dataclasses
#7 3.735   Downloading dataclasses-0.8-py3-none-any.whl (19 kB)
#7 3.898 Collecting zipp>=0.5
#7 3.921   Downloading zipp-3.6.0-py3-none-any.whl (5.3 kB)
#7 4.017 Collecting typing-extensions>=3.6.4
#7 4.046   Downloading typing_extensions-4.1.1-py3-none-any.whl (26 kB)
#7 4.083 Using legacy 'setup.py install' for flask-jsonpify, since package 'wheel' is not installed.
#7 4.174 Installing collected packages: zipp, typing-extensions, MarkupSafe, importlib-metadata, dataclasses, Werkzeug, Jinja2, itsdangerous, click, six, pytz, flask, aniso8601, flask-restful, flask-jsonpify
#7 4.952     Running setup.py install for flask-jsonpify: started
#7 5.231     Running setup.py install for flask-jsonpify: finished with status 'done'
#7 5.237 Successfully installed Jinja2-3.0.3 MarkupSafe-2.0.1 Werkzeug-2.0.3 aniso8601-9.0.1 click-8.0.4 dataclasses-0.8 flask-2.0.3 flask-jsonpify-1.5.0 flask-restful-0.3.10 importlib-metadata-4.8.3 itsdangerous-2.0.1 pytz-2023.3.post1 six-1.16.0 typing-extensions-4.1.1 zipp-3.6.0
#7 5.238 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#7 DONE 5.6s
#8 [4/5] WORKDIR /python_api
#8 DONE 0.2s
#9 [5/5] COPY python-api.py /python_api
#9 DONE 0.3s
#10 exporting to image
#10 exporting layers
#10 exporting layers 3.4s done
#10 writing image sha256:ea94b480b86be8babefe2ed5c395b27b0df2377ed1f29ef1e2241da19de8c7b3
#10 writing image sha256:ea94b480b86be8babefe2ed5c395b27b0df2377ed1f29ef1e2241da19de8c7b3 0.1s done
#10 naming to 51.250.6.58:5005/root/my-pro:hello-gitlab-f7d8bde2 0.0s done
#10 DONE 3.5s
$ docker push $CI_REGISTRY_IMAGE:hello-gitlab-$CI_COMMIT_SHORT_SHA
The push refers to repository [51.250.6.58:5005/root/my-pro]
e126ce6303b9: Preparing
2743f3fc6540: Preparing
ddc30154eeeb: Preparing
c36da052b8cb: Preparing
174f56854903: Preparing
2743f3fc6540: Pushed
e126ce6303b9: Pushed
ddc30154eeeb: Pushed
c36da052b8cb: Pushed
174f56854903: Pushed
hello-gitlab-f7d8bde2: digest: sha256:e3ceeff04469b997a52993921762ec213fb86864709cb34ef7f85c320ff3ec46 size: 1367
Job succeeded
